/* =========================
Variables & Base
========================= */
:root{
--bg-primary:#0a0e0a;
--bg-secondary:#1a1f1a;
--text-primary:#00ff41;
--accent:#00ff41;
--border:#2a332a;
--shadow:rgba(0,255,65,0.1);
--sidebar-width:340px;
--binary-color:rgba(80,255,140,0.12);
--sidebar-transition:300ms;
}

[data-theme="light"]{
--bg-primary:#ffffff;
--bg-secondary:#eceeef;
--text-primary:#2c3e50;
--accent:#2c3e50; /* dark-grey accent in light mode */
--border:#cccccc;
--shadow:rgba(0,0,0,0.1);
--binary-color:rgba(0,0,0,0.06);
}

/* reset / base */
*{box-sizing:border-box;margin:0;padding:0}
body{
font-family:'Courier New',monospace;
background:var(--bg-primary);
color:var(--text-primary);
transition:background .3s,color .3s;
}

/* =========================
Header
========================= */
header{
position:relative;
display:flex;
justify-content:flex-end; /* desktop: toggle on right */
align-items:center;
padding:20px 20px 20px 0;
border-bottom:1px solid var(--border);
margin-bottom:40px;
}

/* desktop: centered title across content area (accounts for sidebar) */
header .title{
position:absolute;
left:calc(50% + var(--sidebar-width)/2);
transform:translateX(-50%);
margin:0;
pointer-events:none;
color:var(--text-primary);
}

/* theme toggle */
.theme-toggle{
background:var(--bg-secondary);
border:1px solid var(--border);
color:var(--text-primary);
padding:10px 20px;
border-radius:8px;
cursor:pointer;
font-size:14px;
display:flex;
align-items:center;
gap:12px;
transition:all .3s;
flex:0 0 auto;
}
.theme-toggle:hover{
background:var(--accent);
color:var(--bg-primary);
border-color:var(--accent);
}
.switch{position:relative;width:40px;height:20px;background:var(--border);border-radius:10px;transition:background .3s}
.switch::before{content:'';position:absolute;width:16px;height:16px;border-radius:50%;background:var(--accent);top:2px;left:2px;transition:transform .3s}
[data-theme="light"] .switch::before{transform:translateX(20px)}

/* mobile menu toggle (hidden by default) */
.mobile-menu-toggle{display:none;align-items:center;justify-content:center;width:44px;height:44px;border-radius:8px;border:1px solid var(--border);background:var(--bg-secondary);color:var(--text-primary);font-size:20px;cursor:pointer;margin-right:12px}

/* =========================
Layout: Sidebar / Main
========================= */
.container, .article-container{position:relative;z-index:2}

.sidebar{
width:var(--sidebar-width);
position:fixed;
left:0;top:0;bottom:0;
background:var(--bg-secondary);
padding:40px 20px;
border-right:1px solid var(--border);
box-shadow:2px 0 8px var(--shadow);
text-align:center;
overflow-y:auto;
}
.profile-photo{width:180px;height:180px;border-radius:50%;border:2px solid var(--accent);object-fit:cover;margin-bottom:20px}
.sidebar h1{font-size:28px;margin-bottom:10px;color:var(--text-primary)}
.sidebar .title{font-size:16px;color:#b0b0b0;margin-bottom:15px;border-bottom:1px solid var(--border);padding-bottom:15px}
.sidebar .bio{font-size:14px;color:#909090;text-align:left;margin-bottom:25px;line-height:1.7}

/* icon links */
.icon-links{display:flex;justify-content:center;gap:20px}
.icon-btn{
width:40px;height:40px;display:flex;align-items:center;justify-content:center;
color:var(--accent);background:var(--bg-primary);border:1px solid var(--border);border-radius:8px;transition:.3s
}
.icon-btn:hover{background:var(--accent);color:var(--bg-primary);transform:translateY(-2px)}
.icon-btn svg{width:22px;height:22px}

/* main content */
.main-content{display:flex;flex-direction:column;align-items:center;margin-left:var(--sidebar-width)}
.content-area{max-width:1100px;width:100%}

/* =========================
Articles Grid / Cards
========================= */
.articles-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px}
.article-card{
background:var(--bg-secondary);border-radius:12px;overflow:hidden;
box-shadow:0 2px 8px var(--shadow);transition:transform .3s,box-shadow .3s;cursor:pointer
}
.article-card:hover{transform:translateY(-5px);box-shadow:0 8px 16px var(--shadow)}

.article-image{height:180px;background:var(--bg-primary);display:flex;align-items:center;justify-content:center;text-align:center;border-radius:8px 8px 0 0;overflow:hidden}
.article-image img{width:100%;height:100%;object-fit:contain;object-position:center;display:block;border-radius:inherit;background:var(--bg-primary)}

.article-content{padding:25px}
.article-date{font-size:13px;color:#9aa;margin-bottom:8px}
.article-title{font-size:20px;margin-bottom:12px}
.article-description{font-size:14px;color:#909090}
.article-tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:15px}
.tag{padding:4px 12px;background:var(--bg-primary);border-radius:4px;font-size:12px;color:#a0a0a0}

/* grid responsiveness (kept near other responsive rules) */
@media (max-width:1100px){.articles-grid{grid-template-columns:repeat(3,1fr)}}
@media (max-width:900px){.articles-grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width:768px){.articles-grid{grid-template-columns:1fr}}

/* =========================
Article View / Injected Content
========================= */
#article-view{position:relative;z-index:2;width:100%;max-width:1200px;margin:0 auto;padding:20px;color:var(--text-primary)}
/* wrapper neutral so only fetched .article-container styles apply */
#article-view .article-frame{width:100%;max-width:none;margin:0;padding:0;background:transparent;border:none;box-shadow:none}
#article-view .article-frame > .back-link{margin-bottom:18px}

/* Article presentation styles (inner .article-container from article files) */
.article-container{
max-width:900px;margin:28px auto;padding:28px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.02));
border:1px solid var(--border);border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.25);
color:var(--text-primary);font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;line-height:1.75;font-size:17px;z-index:4
}
.article-container > .back-link, #article-view .back-link{display:inline-block;margin-bottom:18px;background:transparent;border:1px solid var(--border);color:var(--text-primary);padding:8px 12px;border-radius:8px;cursor:pointer}
.article-container h1{font-size:32px;margin:6px 0 6px;color:var(--text-primary);letter-spacing:-.2px}
.article-container .meta{display:flex;gap:12px;align-items:center;margin-bottom:20px;color:#9aa;font-size:13px}
.article-container .meta .tag{background:var(--bg-primary);color:#cfcfcf;padding:4px 10px;border-radius:6px;font-size:12px}

.article-container article{color:var(--text-primary);font-size:17px}
.article-container article p{margin:0 0 16px 0;color:rgba(255,255,255,0.85)}
.article-container article ul,.article-container article ol{margin:0 0 18px 1.15em;color:rgba(255,255,255,0.9)}
.article-container article h2{font-size:20px;margin:22px 0 10px;color:var(--accent)}
.article-container article h3{font-size:18px;margin:18px 0 8px;color:var(--text-primary)}
.article-container article img, .article-container article figure{max-width:100%;height:auto;display:block;margin:18px auto;border-radius:10px;box-shadow:0 8px 24px rgba(0,0,0,0.22)}
.article-container article blockquote{border-left:4px solid var(--accent);margin:16px 0;padding:10px 14px;background:rgba(0,0,0,0.04);color:rgba(255,255,255,0.9);border-radius:6px}
.article-container article code{background:rgba(0,0,0,0.12);color:var(--text-primary);border-radius:6px;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,"Roboto Mono",monospace;font-size:.92em}
.article-container article pre{background:rgba(0,0,0,0.12);padding:14px;border-radius:10px;overflow:auto;margin:14px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,"Roboto Mono",monospace;font-size:.9em;line-height:1.45;border:1px solid rgba(0,0,0,0.15)}
.article-container a{color:var(--accent);text-decoration:underline;text-underline-offset:3px}

/* Initial Info table used in HTB writeups */
.info-table{
	width:100%;
	border-collapse:collapse;
	margin:0 0 16px 0;
	font-size:15px;
	color:var(--text-primary);
}
.info-table th,
.info-table td{
	text-align:left;
	padding:10px 12px;
	vertical-align:top;
}
.info-table th{
	width:33.333%;
	color:rgba(255,255,255,0.8);
	font-weight:600;
	background:transparent;
}
.info-table td{
	width:66.666%;
	color:rgba(255,255,255,0.95);
}
.info-table tr + tr th,
.info-table tr + tr td{
	border-top:1px solid var(--border);
}
[data-theme="light"] .info-table th{color:#55606a}
[data-theme="light"] .info-table td{color:#2c3e50}

/* styled resource links inside articles (buttons with hover) */
.article-container article .article-link{
display:inline-block;color:var(--accent);background:rgba(255,255,255,0.02);border:1px solid transparent;padding:6px 10px;border-radius:8px;text-decoration:none;transition:transform .16s,box-shadow .16s,background-color .16s,border-color .16s;font-weight:600;margin:6px 0
}
.article-container article .article-link:hover,.article-container article .article-link:focus{transform:translateY(-3px);box-shadow:0 10px 30px rgba(0,0,0,0.18);background:rgba(255,255,255,0.035);border-color:rgba(255,255,255,0.05)}
[data-theme="light"] .article-container article .article-link{background:rgba(0,0,0,0.03);border-color:rgba(0,0,0,0.04);color:var(--accent)}
[data-theme="light"] .article-container article .article-link:hover{box-shadow:0 8px 18px rgba(0,0,0,0.06);transform:translateY(-2px)}

/* small adjustments for article container on narrow screens */
@media (max-width:900px){.article-container{margin:18px 16px;padding:20px}.article-container h1{font-size:26px}}

/* left accent bar for article cards */
.article-container::before{content:"";position:absolute;left:-8px;top:12px;bottom:12px;width:4px;border-radius:4px;background:linear-gradient(180deg,var(--accent),rgba(0,0,0,0.15));opacity:.9}

/* ensure inner fetched article is positioned properly */
#article-view .article-container{position:relative}

/* neutral wrapper for injected article */
#article-view .article-frame{width:100%;max-width:none;margin:0;padding:0;background:transparent;border:none;box-shadow:none}

/* =========================
Binary background (rain)
========================= */
#binary-bg{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden;mix-blend-mode:screen}
#binary-bg .bit{position:absolute;top:-5%;color:var(--binary-color);font-family:monospace;user-select:none;will-change:transform,opacity;text-shadow:0 0 6px rgba(80,255,140,0.06);z-index:0;animation-name:binary-fall,binary-fade;animation-timing-function:linear;animation-iteration-count:infinite}
@keyframes binary-fall{0%{transform:translateY(-10vh)}100%{transform:translateY(110vh)}}
@keyframes binary-fade{0%{opacity:0}10%{opacity:.9}90%{opacity:.4}100%{opacity:0}}

/* =========================
Utility / Lists
========================= */
li{margin:4px 0}

/* Light theme: ensure article text uses a readable dark gray (overrides any white/rgba values) */
[data-theme="light"] .article-container,
[data-theme="light"] .article-container article,
[data-theme="light"] .article-container article p,
[data-theme="light"] .article-container article li,
[data-theme="light"] .article-container article ul,
[data-theme="light"] .article-container article ol,
[data-theme="light"] .article-container article h1,
[data-theme="light"] .article-container article h2,
[data-theme="light"] .article-container article h3,
[data-theme="light"] .article-container article td,
[data-theme="light"] .article-container article th {
	color: var(--text-primary) !important;
}

/* =========================
Responsive: Mobile tweaks
- Keep desktop centering intact
- On mobile: left-align title, allow wrapping
- Sidebar becomes off-canvas / stacked
========================= */
@media (max-width:768px){
/* header: left-align title and allow wrapping (same as before) */
header{justify-content:space-between;padding-left:16px;padding-right:16px;gap:12px}
header > .title, header .title{
position:static;transform:none;pointer-events:auto;margin:0;font-size:1.05rem;color:var(--text-primary);
display:block;flex:1 1 auto;max-width:calc(100% - 96px);overflow:visible;text-overflow:clip;white-space:normal;word-break:break-word
}

.theme-toggle{flex:0 0 auto;margin-left:12px;white-space:nowrap}

/* Always show the sidebar stacked above the articles on small screens */
.mobile-menu-toggle{display:none}               /* hide the button (no toggle) */
#sidebar-overlay{display:none}                  /* remove overlay use */

.sidebar{
position:static;       /* flow in document (stacked above content) */
left:auto; top:auto; bottom:auto;
width:100%;            /* full width */
transform:none;
transition:none;
border-right:none;
box-shadow:none;
padding:20px 16px;
border-bottom:1px solid var(--border);
z-index:2;
}
.sidebar.open{transform:none}

/* layout shifts */
.main-content{margin-left:0}
.container{overflow-x:hidden}
}

/* smaller breakpoints */
@media (max-width:600px){#binary-bg .bit{opacity:.09}}

/* Scroll-to-top floating button shown when articles are open.
   Positioning uses a CSS variable --scroll-left when available so JavaScript
   only writes the numeric left value and CSS handles the final placement.
*/
.scroll-top{
	position:fixed;
	/* If --scroll-left is set, use it; otherwise fall back to right offset */
	left: var(--scroll-left, auto);
	right: var(--scroll-right, 20px);
	bottom:22px;
	z-index:9999;
	width:44px;
	height:44px;
	display:none; /* JS will toggle */
	align-items:center;
	justify-content:center;
	background:var(--accent);
	color:var(--bg-primary);
	border:none;
	border-radius:50%;
	box-shadow:0 6px 20px rgba(0,0,0,0.2);
	cursor:pointer;
	font-size:20px;
	line-height:1;
	transition:transform .15s,opacity .15s,left .12s,right .12s;
}
.scroll-top:hover{transform:translateY(-3px)}

@media (max-width:600px){
	.scroll-top{right:14px;bottom:16px;width:40px;height:40px;font-size:18px}
}