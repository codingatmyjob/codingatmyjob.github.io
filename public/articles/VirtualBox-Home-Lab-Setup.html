<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>VirtualBox Home Lab Setup</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div id="binary-bg" aria-hidden="true"></div>

    <main class="article-container">
        <h1>VirtualBox Home Lab Setup</h1>
        <div class="meta">
            <time datetime="2025-11-08">November 08, 2025</time>
        </div>
        <div class="tags">
            <span class="tag">VM</span>
            <span class="tag">Security</span>
            <span class="tag">Project</span>
            <span class="tag">Networking</span>
            <span class="tag">SIEM</span>
        </div>

        <article>
            <h2>Overview</h2>
            <p>Documenting the design and implementation of a home lab environment using Oracle VirtualBox. 
            The lab features multiple VMs configured on an internal network, enabling safe penetration practice, 
            exploit analysis, and network traffic monitoring with Security Onion and Elastic. This setup provides a cost-effective platform (free)
            for developing offensive and defensive skills without impacting public facing networks.</p>

            <h2>Objectives</h2>
            <p>The primary objectives:</p>
            <ul>
                <li>Create a safe environment for security testing and exploit practice</li>
                <li>Configure multiple VMs with static IP addresses for a consistent lab topology</li>
                <li>Deploy Security Onion for network traffic monitoring, and exploit analysis</li>
                <li>Learn Elastic Stack for centralized logging and analysis at home</li>
                <li>Document the setup process for reproducibility and knowledge sharing</li>
            </ul>

            <h2>Environment Setup</h2>
            <p>The lab is comprised of four virtual machines on a VirtualBox internal network. 
            Each VM serves a specific purpose in the lab environment.</p>

            <h3>Virtual Machine Inventory</h3>
            <table class="info-table" aria-label="VM configuration">
                <tbody>
                    <tr>
                        <th>VM/OS</th>
                        <th>Purpose</th>
                    </tr>
                    <tr>
                        <td>Ubuntu 24.04.3 Desktop</td>
                        <td>General purpose Linux platform for testing</td>
                    </tr>
                    <tr>
                        <td>Parrot OS (Parrot Security 6.4)</td>
                        <td>Primary attack platform with pre-installed penetration testing toolkits</td>
                    </tr>
                    <tr>
                        <td>Metasploitable2 Linux 2.6.24-16-Server</td>
                        <td>Deliberately vulnerable target for exploit practice</td>
                    </tr>
                    <tr>
                        <td>Security Onion 2.3.300</td>
                        <td>Network monitoring, exploit analysis, and traffic capture</td>
                    </tr>
                </tbody>
            </table>

            <h2>Methodology</h2>
            <p>The lab was built systematically to ensure proper network functionality from the start.</p>

            <h3>Network Configuration</h3>
            <p>First I created an internal network in VirtualBox. DHCP was disabled on end devices in favor of static IP assignments for a more consistent lab topology. Each VM was configured 
            with static networking using either Netplan (on modern Ubuntu/Parrot) or traditional interfaces file (Metasploitable2). Upon configuration of a single VM, I verified connectivity with other devices on the network.</p>

            <h3>VM Deployment Process</h3>
            <p>Each virtual machine was deployed with specific network adapter settings. The attack platform (Parrot OS) and 
            target systems (Ubuntu and Metasploitable2) were configured with standard internal network adapters. Security Onion required 
            special configuration with its monitoring interface set to promiscuous mode, allowing it to capture all traffic 
            on the network segment for analysis, and it required another network adapter in bridged mode to access external resources, and access the SOC web interface.</p>

            <h3>Security Onion Configuration</h3>
            <p>Security Onion was configured with Elastic, Suricata IDS and Zeek for comprehensive network traffic analysis and SIEM. 
            The promiscuous configuration allows the system to intercept all traffic on the network, not just traffic addressed 
            to the monitoring device, enabling full visibility into attacks, exploits, and lateral movement attempts during penetration testing events.</p>

            <h3>Verification Testing</h3>
            <p>After configuration, I verified connectivity between all VMs and tested Security Onion's monitoring capabilities 
            by performing basic port scans and exploit attempts. Security Onion successfully detected and logged the network 
            activity, confirming proper network visibility and alerting functionality. 
            In the future, I'd like to do a document both sides; successfully exploiting a service or protocol on Metasploitable2, and then uncover that exploit with Security Onion.</p>

            <h2>Future Improvements</h2>
            <p>Several enhancements are planned to expand the lab's capabilities:</p>
            <ul>
                <li><strong>Automated Snapshots:</strong> Implement snapshot management to quickly revert VMs to healthy states</li>
                <li><strong>Documentation:</strong> Document the Security Onion installation and configuration process</li>
                <li><strong>pfSense Router:</strong> Deploy a pfSense VM to add firewall rules, and inter-network routing capabilities</li>
                <li><strong>Vulnerable Web Apps:</strong> Deploy DVWA, OWASP Juice Shop, and others for web security practice</li>
                <li><strong>Enhanced SIEM:</strong> Customize Security Onion's Elastic stack for improved log visualization</li>
            </ul>

            <h2>References</h2>
            <ul>
                <li><a class="article-link" href="https://www.virtualbox.org/manual/" target="_blank" rel="noopener">Oracle VirtualBox</a></li>
                <li><a class="article-link" href="https://netplan.io/" target="_blank" rel="noopener">Netplan Configuration</a></li>
                <li><a class="article-link" href="https://docs.securityonion.net/" target="_blank" rel="noopener">Security Onion</a></li>
                <li><a class="article-link" href="https://www.parrotsec.org/" target="_blank" rel="noopener">Parrot Security OS</a></li>
                <li><a class="article-link" href="https://sourceforge.net/projects/metasploitable/" target="_blank" rel="noopener">Metasploitable2</a></li>
            </ul>
        </article>
    </main>
</body>
</html>